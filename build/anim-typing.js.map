{"version":3,"file":"anim-typing.js","mappings":"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","sources":["webpack://vayu-blocks/./src/block/animation/utils.js","webpack://vayu-blocks/webpack/bootstrap","webpack://vayu-blocks/webpack/runtime/define property getters","webpack://vayu-blocks/webpack/runtime/hasOwnProperty shorthand","webpack://vayu-blocks/webpack/runtime/make namespace object","webpack://vayu-blocks/./src/block/animation/frontend/typing/index.js"],"sourcesContent":["/**\n * Create utility functions for an interval timer.\n * @param {number} duration The duration, in seconds.\n * @param {number} deltaTime The time between two time ticks, in seconds.\n * @returns Utility functions.\n */\nexport const makeInterval = ( duration, deltaTime ) => {\n\n\tlet interval;\n\tlet currentStep = 0;\n\tconst steps = ( Math.ceil( duration / deltaTime ) + 1 ) || 1;\n\n\t/**\n\t * Stop the interval. Get a callback function that execute at the end.\n\t * @param {Function} callback Function that execute at the end.\n\t */\n\tconst stop = ( callback ) => {\n\t\tclearInterval( interval );\n\t\tcallback?.();\n\t};\n\n\t/**\n\t * Start the interval. Get a callback function that execute at every tick and the one that execute at the end.\n\t * @param {Function} callback Function that execute at every tick.\n\t * @param {Function} endCallback Function that execute at the end.\n\t */\n\tconst start = ( callback, endCallback ) => {\n\t\tinterval = setInterval( () => {\n\t\t\tif ( currentStep < steps ) {\n\t\t\t\tcallback?.( currentStep );\n\t\t\t\tcurrentStep += 1;\n\t\t\t} else {\n\t\t\t\tstop( endCallback );\n\t\t\t}\n\t\t}, deltaTime * 1000 );\n\t};\n\n\treturn {\n\t\tsteps,\n\t\tstart,\n\t\tstop\n\t};\n};\n\n/**\n * Specify a function to execute when the DOM is fully loaded.\n *\n * @param {Callback} callback A function to execute after the DOM is ready.\n * @return {void}\n */\nexport const domReady = ( callback ) => {\n\tif ( 'undefined' === typeof document ) {\n\t\treturn;\n\t}\n\n\tif (\n\t\t'complete' === document.readyState || // DOMContentLoaded + Images/Styles/etc loaded, so we call directly.\n\t\t'interactive' === document.readyState // DOMContentLoaded fires at this point, so we call directly.\n\t) {\n\t\treturn void callback();\n\t}\n\n\t// DOMContentLoaded has not fired yet, delay callback until then.\n\tdocument.addEventListener( 'DOMContentLoaded', callback );\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Internal dependencies\n */\nimport {\n\tdomReady,\n\tmakeInterval\n} from '../../utils.js';\n\nconst MAX_PARENT_SEARCH = 3;\n\n/**\n * This is the speed per characher and not the total one like in the other animations.\n */\nconst speedConfig = {\n\t'none': undefined,\n\t'o-typing-slower': 0.4,\n\t'o-typing-slow': 0.25,\n\t'o-typing-fast': 0.05,\n\t'o-typing-faster': 0.01\n};\n\n/**\n * Get the configuration option from the element CSS classes.\n * @param {HTMLDivElement} elem\n * @returns Configuration options.\n */\nconst getConfiguration = ( elem ) => {\n\tlet parent = elem.parentElement;\n\tfor ( let i = 0; i < MAX_PARENT_SEARCH; ++i ) {\n\t\tif ( Array.from( parent.classList ).some( o => o.includes( 'o-typing-' ) ) ) {\n\t\t\tconst arr = Array.from( parent.classList );\n\n\t\t\tconst delay = arr.filter( x => x.includes( 'o-typing-delay-' ) ).pop();\n\t\t\tconst number = parseInt( delay?.split( '-' )?.[3] || '0' );\n\t\t\tconst isMS = delay?.includes( 'ms' );\n\n\t\t\tconst speedOptions = Object.keys( speedConfig );\n\t\t\tconst speed = arr?.filter( x => speedOptions.includes( x ) )?.pop() || 'fast';\n\n\t\t\treturn {\n\t\t\t\tspeed: speedConfig[speed],\n\t\t\t\tdelay: number * ( isMS ? 0 : 1000 )\n\t\t\t};\n\t\t}\n\t}\n\treturn undefined;\n};\n\n\n/**\n * Start the count animation.\n * @param {HTMLDivElement} elem The HTML element.\n * @return {Function} Start the typing animation.\n */\nconst initTyping = ( elem ) => {\n\tconst text = elem?.innerHTML || '';\n\tconst config = getConfiguration( elem );\n\n\tif ( ! text?.length ) {\n\t\treturnl;\n\t}\n\n\tconst len = text.length;\n\tconst totalTime = ( config?.speed || 0.1 ) * len;\n\tconst { start, steps, stop } = makeInterval( totalTime, config?.speed || 0.1 );\n\n\tconst typingPlaceholder = document.createElement( 'span' );\n\ttypingPlaceholder.classList.add( 'o-anim-typing-caret' );\n\ttypingPlaceholder.style.whiteSpace = 'pre-wrap';\n\n\tconst fillPlaceholder = document.createElement( 'span' );\n\tfillPlaceholder.style.whiteSpace = 'pre-wrap';\n\tfillPlaceholder.style.visibility = 'hidden';\n\n\tconst originalContent = elem.innerHTML;\n\n\telem.innerHTML = '';\n\telem.appendChild( typingPlaceholder );\n\telem.appendChild( fillPlaceholder );\n\ttypingPlaceholder.innerHTML = text.slice( 0, 0 );\n\tfillPlaceholder.innerHTML = text.slice( 0 );\n\n\treturn () => {\n\t\tsetTimeout( () => {\n\t\t\tstart( ( i ) => {\n\t\t\t\ttypingPlaceholder.innerHTML = text.slice( 0, i );\n\t\t\t\tif ( i < len ) {\n\t\t\t\t\tfillPlaceholder.innerHTML = text.slice( i );\n\t\t\t\t}\n\t\t\t\tif ( len >= steps ) {\n\t\t\t\t\tstop();\n\t\t\t\t}\n\t\t\t}, () => {\n\t\t\t\telem.innerHTML = originalContent;\n\t\t\t});\n\n\t\t}, config?.delay || 0 );\n\t};\n};\n\ndomReady( () => {\n\tconst options = {\n\t\troot: null,\n\t\trootMargin: '0px',\n\t\tthreshold: [ 0.6 ]\n\t};\n\n\tlet styles = `\n\t\t.o-anim-typing-caret::after {\n\t\t\tfont-weight: 100;\n\t\t\tcontent: '|';\n\t\t\tcolor: #2E3D48;\n\t\t\tanimation: 1s blink step-end infinite;\n\t\t}\n\t\n\t\t@keyframes blink {\n\t\t\tfrom, to {\n\t\t\t  color: transparent;\n\t\t   }\n\t\t\t50% {\n\t\t\t  color: black;\n\t\t   }\n\t\t}\n\t`;\n\n\tstyles = styles.replace( /(\\r\\n|\\n|\\r|\\t)/gm, '' );\n\n\tlet hasStyles = false;\n\n\tsetTimeout( () => {\n\t\tconst anims = document.querySelectorAll( 'o-anim-typing' );\n\t\tanims.forEach( ( elem ) => {\n\t\t\tif ( ! hasStyles ) {\n\t\t\t\tconst styleSheet = document.createElement( 'style' );\n\t\t\t\tstyleSheet.innerText = styles;\n\t\t\t\tdocument.head.appendChild( styleSheet );\n\t\t\t\thasStyles = true;\n\t\t\t}\n\n\t\t\tconst startTyping = initTyping( elem );\n\t\t\tconst observer = new IntersectionObserver( ( entries ) => {\n\t\t\t\tentries.forEach( entry => {\n\t\t\t\t\tif ( entry.isIntersecting && 0 < entry.intersectionRect.height ) {\n\t\t\t\t\t\tobserver.unobserve( elem );\n\t\t\t\t\t\tstartTyping();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, options );\n\t\t\tobserver.observe( elem );\n\t\t});\n\t}, 100 );\n\n});\n"],"names":["makeInterval","duration","deltaTime","interval","currentStep","steps","Math","ceil","stop","callback","clearInterval","start","endCallback","setInterval","domReady","document","readyState","addEventListener","MAX_PARENT_SEARCH","speedConfig","undefined","getConfiguration","elem","parent","parentElement","i","Array","from","classList","some","o","includes","arr","delay","filter","x","pop","number","parseInt","split","isMS","speedOptions","Object","keys","speed","initTyping","text","innerHTML","config","length","returnl","len","totalTime","typingPlaceholder","createElement","add","style","whiteSpace","fillPlaceholder","visibility","originalContent","appendChild","slice","setTimeout","options","root","rootMargin","threshold","styles","replace","hasStyles","anims","querySelectorAll","forEach","styleSheet","innerText","head","startTyping","observer","IntersectionObserver","entries","entry","isIntersecting","intersectionRect","height","unobserve","observe"],"sourceRoot":""}