(()=>{"use strict";var e,t={4059:()=>{const e=window.wp.blocks,t=window.wp.i18n,r=window.React,o=window.wp.primitives,a=(0,r.createElement)(o.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)(o.Path,{d:"M18.1823 11.6392C18.1823 13.0804 17.0139 14.2487 15.5727 14.2487C14.3579 14.2487 13.335 13.4179 13.0453 12.2922L13.0377 12.2625L13.0278 12.2335L12.3985 10.377L12.3942 10.3785C11.8571 8.64997 10.246 7.39405 8.33961 7.39405C5.99509 7.39405 4.09448 9.29465 4.09448 11.6392C4.09448 13.9837 5.99509 15.8843 8.33961 15.8843C8.88499 15.8843 9.40822 15.781 9.88943 15.5923L9.29212 14.0697C8.99812 14.185 8.67729 14.2487 8.33961 14.2487C6.89838 14.2487 5.73003 13.0804 5.73003 11.6392C5.73003 10.1979 6.89838 9.02959 8.33961 9.02959C9.55444 9.02959 10.5773 9.86046 10.867 10.9862L10.8772 10.9836L11.4695 12.7311C11.9515 14.546 13.6048 15.8843 15.5727 15.8843C17.9172 15.8843 19.8178 13.9837 19.8178 11.6392C19.8178 9.29465 17.9172 7.39404 15.5727 7.39404C15.0287 7.39404 14.5066 7.4968 14.0264 7.6847L14.6223 9.20781C14.9158 9.093 15.2358 9.02959 15.5727 9.02959C17.0139 9.02959 18.1823 10.1979 18.1823 11.6392Z"})),s=window.wp.blockEditor,n=window.wp.components,l=window.wp.compose,c=window.wp.element,u=window.wp.data,i=window.wp.coreData,p=e=>{const t=(0,u.useSelect)((t=>{const{getTaxonomies:r,getPostType:o}=t(i.store),a=o(e);return a?.taxonomies?.length>0?r({per_page:-1}):[]}),[e]);return(0,c.useMemo)((()=>t?.filter((({visibility:e})=>!!e?.publicly_queryable))),[t])},d=window.wp.htmlEntities,y=[],m={order:"asc",_fields:"id,name",context:"view"},b=(e,t)=>{const r=t?.id||e?.find((e=>e.name===t))?.id;if(r)return r;const o=t.toLocaleLowerCase();return e?.find((e=>e.name.toLocaleLowerCase()===o))?.id};function g({taxonomy:e,termIds:t,onChange:o}){const[a,s]=(0,c.useState)(""),[p,g]=(0,c.useState)(y),[v,h]=(0,c.useState)(y),w=(0,l.useDebounce)(s,250),{searchResults:_,searchHasResolved:k}=(0,u.useSelect)((r=>{if(!a)return{searchResults:y,searchHasResolved:!0};const{getEntityRecords:o,hasFinishedResolution:s}=r(i.store),n=["taxonomy",e.slug,{...m,search:a,orderby:"name",exclude:t,per_page:20}];return{searchResults:o(...n),searchHasResolved:s("getEntityRecords",n)}}),[a,t]),f=(0,u.useSelect)((r=>{if(!t?.length)return y;const{getEntityRecords:o}=r(i.store);return o("taxonomy",e.slug,{...m,include:t,per_page:t.length})}),[t]);return(0,c.useEffect)((()=>{if(t?.length||g(y),!f?.length)return;const e=t.reduce(((e,t)=>{const r=f.find((e=>e.id===t));return r&&e.push({id:t,value:r.name}),e}),[]);g(e)}),[t,f]),(0,c.useEffect)((()=>{k&&h(_.map((e=>e.name)))}),[_,k]),(0,r.createElement)("div",{className:"block-library-query-inspector__taxonomy-control"},(0,r.createElement)(n.FormTokenField,{label:e.name,value:p,onInputChange:w,suggestions:v,displayTransform:d.decodeEntities,onChange:e=>{const t=new Set;for(const r of e){const e=b(_,r);e&&t.add(e)}h(y),o(Array.from(t))},__experimentalShowHowTo:!1,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}))}const v=function({onChange:e,query:t}){const{postType:o,taxQuery:a}=t,s=p(o);return s&&0!==s.length?(0,r.createElement)(n.__experimentalVStack,{spacing:4},s.map((t=>{const o=a?.[t.slug]||[];return(0,r.createElement)(g,{key:t.slug,taxonomy:t,termIds:o,onChange:r=>e({taxQuery:{...a,[t.slug]:r}})})}))):null},h=({attributes:e,setAttributes:o})=>{const{query:a}=e,{order:d,orderBy:y,postType:m,taxQuery:b,search:g}=a,h=(()=>{const e=(0,u.useSelect)((e=>e(i.store).getPostTypes({per_page:-1})),[]);return e?e.filter((e=>e.viewable)).map((e=>({label:e.labels.singular_name,value:e.slug}))):[]})(),w=p(m),[_,k]=(0,c.useState)(g),f=(0,c.useCallback)((0,l.debounce)((()=>{a.search!==_&&o({query:{...a,search:_}})}),250),[_,a.search]);(0,c.useEffect)((()=>(f(),f.cancel)),[_,f]);const C=[{label:(0,t.__)("Newest to oldest","vayu-blocks"),value:"date/desc"},{label:(0,t.__)("Oldest to newest","vayu-blocks"),value:"date/asc"},{label:(0,t.__)("A → Z","vayu-blocks"),value:"title/asc"},{label:(0,t.__)("Z → A","vayu-blocks"),value:"title/desc"}];return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(s.InspectorControls,null,(0,r.createElement)(n.PanelBody,{title:(0,t.__)("Settings","vayu-blocks"),initialOpen:!0,className:"th-query-loop-panel"},(0,r.createElement)(n.SelectControl,{label:(0,t.__)("Post Type","vayu-blocks"),value:m,options:h,onChange:e=>{const t=w.map((e=>e.slug)),r=Object.entries(b||{}).reduce(((e,[r,o])=>(t.includes(r)&&(e[r]=o),e)),{});o({query:{...a,postType:e,taxQuery:Object.keys(r).length?r:null}})}}),(0,r.createElement)((({order:e,orderBy:o,onChange:a})=>(0,r.createElement)(n.SelectControl,{label:(0,t.__)("Order by","vayu-blocks"),value:`${o}/${e}`,options:C,onChange:e=>{const[t,r]=e.split("/");a({order:r,orderBy:t})}})),{order:d,orderBy:y,onChange:t=>o({query:{...e.query,...t}})})),(0,r.createElement)(n.__experimentalToolsPanel,{className:"block-library-query-toolspanel__filters",label:(0,t.__)("Filters","vayu-blocks"),resetAll:()=>{o({query:{...a,author:"",parents:[],search:"",taxQuery:null}})}},(0,r.createElement)(n.__experimentalToolsPanelItem,{label:(0,t.__)("Taxonomies","vayu-blocks"),hasValue:()=>Object.values(b||{}).some((e=>e.length)),onDeselect:()=>o({query:{...a,taxQuery:null}})},(0,r.createElement)(v,{taxonomies:w,query:a,onChange:e=>o({query:{...a,taxQuery:e}})})))))},w=[["core/post-template",{layout:{type:"grid",columnCount:2}},[["core/post-title"],["core/post-date"],["core/post-excerpt"]]]],_=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"vayu-blocks/advance-query-loop","title":"Advance Query Loop Block","category":"vayu-blocks","textdomain":"vayu-blocks","icon":"loop","attributes":{"namespace":{"type":"string","default":"core/posts-list"},"queryId":{"type":"number"},"query":{"type":"object","default":{"perPage":null,"pages":0,"offset":0,"postType":"post","order":"desc","orderBy":"date","author":"","search":"","exclude":[],"sticky":"","inherit":true,"taxQuery":null,"parents":[]}}},"providesContext":{"queryId":"queryId","query":"query","displayLayout":"displayLayout"},"supports":{"align":["wide","full"],"html":false,"layout":true,"interactivity":true}}'),{name:k}=_;(0,e.registerBlockType)(k,{..._,title:(0,t.__)("Advance Query Loop Block","vayu-blocks"),description:(0,t.__)("Advance Query Block","vayu-blocks"),icon:a,edit:({attributes:e,setAttributes:t})=>{const o=(0,s.useBlockProps)();return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(h,{attributes:e,setAttributes:t}),(0,r.createElement)("div",{...o},(0,r.createElement)(s.InnerBlocks,{template:w,templateLock:!1})))},save:()=>{const e=s.useBlockProps.save();return(0,r.createElement)("div",{...e},(0,r.createElement)(s.InnerBlocks.Content,null))},variations:[{name:"grid",title:"Grid Layout",attributes:{namespace:"core/posts-list",query:{order:"asc",orderBy:"title"}},innerBlocks:[["core/post-template",{layout:{type:"grid",columnCount:2}}]]}],example:{viewportWidth:650,attributes:{namespace:"core/posts-list",query:{perPage:4,pages:1,offset:0,postType:"post",order:"desc",orderBy:"date",author:"",search:"",sticky:"exclude",inherit:!0}},innerBlocks:[{name:"core/post-template",attributes:{layout:{type:"grid",columnCount:2}},innerBlocks:[{name:"core/post-title"},{name:"core/post-date"}]}]}})}},r={};function o(e){var a=r[e];if(void 0!==a)return a.exports;var s=r[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.m=t,e=[],o.O=(t,r,a,s)=>{if(!r){var n=1/0;for(i=0;i<e.length;i++){for(var[r,a,s]=e[i],l=!0,c=0;c<r.length;c++)(!1&s||n>=s)&&Object.keys(o.O).every((e=>o.O[e](r[c])))?r.splice(c--,1):(l=!1,s<n&&(n=s));if(l){e.splice(i--,1);var u=a();void 0!==u&&(t=u)}}return t}s=s||0;for(var i=e.length;i>0&&e[i-1][2]>s;i--)e[i]=e[i-1];e[i]=[r,a,s]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={123:0,946:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var a,s,[n,l,c]=r,u=0;if(n.some((t=>0!==e[t]))){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(c)var i=c(o)}for(t&&t(r);u<n.length;u++)s=n[u],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(i)},r=globalThis.webpackChunkvayu_blocks=globalThis.webpackChunkvayu_blocks||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=o.O(void 0,[946],(()=>o(4059)));a=o.O(a)})();